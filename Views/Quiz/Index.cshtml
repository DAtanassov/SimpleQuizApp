@model SimpleQuizApp.Models.ViewModels.QuizViewModel

<div class="container py-5">

	@if (!Model.Questions.Any())
	{
		<div class="alert alert-warning text-center shadow-sm" role="alert">
			No quiz questions are available at the moment. Please check back later.
		</div>
	}
	else
	{
		<div class="container py-5">
			<div class="row justify-content-center">
				
				<div class="col-md-10 col-lg-8">
					<div class="card shadow-lg border-0">
						<div class="card-body p-4">

							<div class="text-center mb-4">
								<h2 class="fw-bold text-primary">Take the Quiz</h2>
								<p class="text-muted">Answer all questions and submit your answers below.</p>
							</div>

							<form id="quizForm" asp-controller="Quiz" asp-action="SubmitQuiz" method="post">
								<input type="hidden" name="QuizId" value="@Model.QuizId" />

								@for (int i = 0; i < Model.Questions.Count; i++)
								{
									<div class="card mb-3 border-0 shadow-sm">
										<div class="card-body">
											<h5 class="card-title mb-3">
												<span class="badge bg-primary me-2">@(i + 1)</span>
												@Model.Questions[i].QuestionText
											</h5>

											<div class="list-group">
												@foreach (var answer in Model.Questions[i].Answers)
												{
													<label class="list-group-item list-group-item-action d-flex align-items-center">
														<input required class="form-check-input me-3" type="radio" value="@answer.Id" name="userAnswers[@i]" />
														<span><strong>@answer.Option.</strong> @answer.Text</span>
													</label>
												}
											</div>
										</div>
									</div>
								}

								<div class="text-center mt-4">
									<button type="submit" class="btn btn-success btn-sm px-4 me-2">Submit Quiz</button>
									<button type="reset" class="btn btn-warning btn-sm px-4 me-2" onclick="resetQuestionBar();">Reset anwers</button>
									<a asp-controller="Quiz" asp-action="Index" asp-route-Id="@Model.QuizId" class="btn btn-info btn-sm px-4 me-2 text-white">Reload Quiz</a>
									<a asp-controller="Home" asp-action="Index" class="btn btn-primary btn-sm px-4">Back to Home</a>
								</div>
							</form>
						</div>
					</div>

				</div>

			</div>
		</div>
	}
</div>